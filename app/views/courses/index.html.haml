- content_for :title do
  EiuELearning
  \| 
  = action_name.humanize
  courses
  

- if current_user
  %h2
    .fa.fa-user-graduate
    Continue Learning
  .card-columns
    - @purchased_courses.each do |course|
      = render 'courses/course', course: course    
  .text-right
    = link_to 'All my purchased courses', purchased_courses_path    
  %hr
  
%h2
  .fa.fa-chart-line
  Popular courses
.card-group
  - @popular.each do |course|
    = render 'courses/course', course: course
.text-right
  = link_to 'More popular courses', courses_path(courses_search: {s: 'enrollments_count desc'})    

%hr
%h2 
  .fa.fa-star
  Top rated courses
.card-group
  - @top_rated.each do |course|
    = render 'courses/course', course: course
.text-right
  = link_to 'Best rated courses', courses_path(courses_search: {s: 'average_rating desc'})    

%hr
%h2 
  .fa.fa-clock
  Latest courses
.card-group
  - @latest.each do |course|
    = render 'courses/course', course: course
.text-right
  = link_to 'More new courses', courses_path(courses_search: {s: 'created_at desc'})    

%hr


.row
  .col-md-2
    %h3
    .text-center
      .fa.fa-graduation-cap
      = action_name.humanize
      courses
      .badge.bg-info
        = @courses.count
      
    /= search_form_for @q do |f|
    = search_form_for @ransack_courses, as: :courses_search, url: @ransack_path do |f|
      = f.label :title
      = f.search_field :title_cont, placeholder: 'Title', class: 'form-control form-control-sm'
      = f.label :description
      = f.search_field :short_description_cont, placeholder: 'Description', class: 'form-control form-control-sm'
      /= f.search_field :language_cont, placeholder: 'Language', class: 'form-control form-control-sm'
      /= f.select :language_cont, ['English', 'Polish', 'Russian'], include_blank: true, class: 'form-control form-control-sm'
      = f.label :language
      = f.select :language_cont, Course.languages, include_blank: true
      /= f.search_field :level_cont, placeholder: 'Level', class: 'form-control form-control-sm'
      = f.label :level
      = f.select :level_cont, Course.levels, include_blank: true
      = f.label :price
      = f.search_field :price_eq, placeholder: 'Price', class: 'form-control form-control-sm'
      = f.label :teacher
      = f.search_field :user_email_cont, placeholder: 'Email', class: 'form-control form-control-sm'
      .row
      = sort_link(@ransack_courses, :price)
      .row
      = sort_link(@ransack_courses, :average_rating, "Top Rated")
      .row
      = sort_link(@ransack_courses, :enrollments_count, "Most Popular")
      .row
      = sort_link(@ransack_courses, :created_at, "Fresh")
      .row
      = f.submit
    = link_to 'refresh', @ransack_path

  %section.wrapper
    .container
      - @courses.each do |course|
        = render 'courses/course', course: course
    != pagy_bootstrap_nav(@pagy)    
    
%br
